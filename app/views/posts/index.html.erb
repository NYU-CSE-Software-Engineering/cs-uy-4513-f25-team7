<h1>Forum Posts</h1>

<%= link_to 'New Post', new_post_path, class: 'btn btn-primary mb-3' %>

<div class="posts-list">
  <% @posts.each do |post| %>
    <div class="card mb-3">
      <div class="card-body">
        <h5 class="card-title">
          <%= link_to post.title, post %>
          <% if post.post_type == 'Meta' %>
            <span class="badge bg-info text-dark" data-test-id="post-badge-meta">Meta</span>
          <% else %>
            <span class="badge bg-secondary"><%= post.post_type %></span>
          <% end %>
        </h5>
        <p class="card-text text-muted">Posted by <%= post.user.email %> on <%= post.created_at.strftime("%B %d, %Y") %></p>
        <p class="card-text"><%= truncate(post.body, length: 100) %></p>
      </div>
    </div>
  <% end %>
</div>
